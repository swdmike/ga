package com.gisquest.ga.utils;

import com.gisquest.ga.config.AppConfig;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import static org.junit.Assert.*;

/**
 * Created by swd on 2018/8/9
 *
 * @Description:
 */
@RunWith(SpringRunner.class)
@SpringBootTest
public class GeometryUtilTest
{
    @Autowired
    AppConfig appConfig;

    @Test
    public void covertWKTPolygonJWDToXY()
    {
        Integer ellipse = appConfig.getEllipse();
        Integer cm = appConfig.getCentralmeridian();
        Integer dai = appConfig.getDai();

        String wkt = "POLYGON ((118.8865969399188 29.091793580120896, 118.88646563627019 29.091845171212881, 118.886369024699 29.091851409464979, 118.88627993666898 29.091836735517983, 118.88625654918924 29.091832881393941, 118.88595064036751 29.091703144127383, 118.88592123229083 29.09168830338869, 118.88546663717504 29.091458884877028, 118.88544373321589 29.091449436895751, 118.88515189429585 29.091329067914128, 118.88488881638445 29.091282201398489, 118.88477209558307 29.091261407637923, 118.88479614674121 29.091177059694303, 118.88482439708406 29.091077985052635, 118.88489816088898 29.090685454131254, 118.88460512090828 29.090524782956315, 118.8847654728559 29.090083890541774, 118.88475523981785 29.089889664651782, 118.8847696722459 29.089684822720013, 118.8848437161672 29.089656656583248, 118.88493751603967 29.089682608485834, 118.88496868471336 29.089588110202502, 118.88498837590559 29.089528405609975, 118.88501878123425 29.08942734155697, 118.88503204515851 29.0893832571975, 118.88504538919463 29.089402384164124, 118.88508939633989 29.08946546168314, 118.88523472836357 29.089513040860808, 118.88541920430961 29.0895401924357, 118.88549786523666 29.089563952283541, 118.88576809336642 29.089645573871323, 118.88622444708823 29.089700599172541, 118.88640901168056 29.089719187985125, 118.88637857114237 29.089847218647883, 118.88633274629818 29.0902117511304, 118.88616613675949 29.090614074296195, 118.88611600029157 29.090758810324488, 118.88610504368312 29.0908697692248, 118.88618177923215 29.090964318420848, 118.88639956143923 29.090989726252182, 118.88644817895842 29.090995398284452, 118.8866573740961 29.091045131708043, 118.8867304754052 29.091060433223749, 118.88681293600826 29.091077694214746, 118.88688774498662 29.091093321051918, 118.8868538616601 29.091203124501764, 118.88678792301099 29.091416809598005, 118.88662337649285 29.091741424400141, 118.8865969399188 29.091793580120896))";
        String wktXY = ProjectUtil.CovertWKTPolygonJWDToXY(wkt, ellipse, cm, dai);
        System.out.println(wktXY);
    }

    @Test
    public void simplifyWKTPolygon()
    {
        String wkt1 = "POLYGON ((40391008.1904 3220912.1339, 40391001.5758 3220701.7896999996, 40391214.565799996 3220701.7896999996, 40391237.0554 3220872.4463, 40391008.1904 3220912.1339))";
        System.out.println(GeometryUtil.simplifyWKTPolygon(wkt1));
        String wkt2 = "POLYGON ((40391008.1904 3220912.1339, 40391237.0554 3220872.4463, 40391214.565799996 3220701.7896999996, 40391001.5758 220701.7896999996, 40391008.1904 3220912.1339))";
        System.out.println(GeometryUtil.simplifyWKTPolygon(wkt2));
    }

}